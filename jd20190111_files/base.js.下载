var _hmt=_hmt||[];var mssage=humane.create({timeout:3000,clickToClose:true});(function(){var bp=document.createElement("script");var curProtocol=window.location.protocol.split(":")[0];if(curProtocol==="https"){bp.src="https://zz.bdstatic.com/linksubmit/push.js"}else{bp.src="http://push.zhanzhang.baidu.com/push.js"}var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?0fc6ded8acac611e6579a095f3e80589";s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);$("#search").on("submit",function(){var keywords=$("#keywords").val();if(!keywords){mssage.log("请输入想要搜索的内容");return false}if(keywords.length<2){mssage.log("搜索的内容必须大于等于2个字符");return false}return true});$.get("/account/userinfo",function(f){if(f.IsLogin){$("#login").show();$("#unlogin").hide()}try{if(typeof(eval(getUserCallback))=="function"){getUserCallback(f)}}catch(e){}});var isLoad=false;$("#loginModal").on("show.bs.modal",function(e){if(isLoad){return}$("#loginModal").load("/account/LoginDialog",function(){isLoad=true;$("#Login").validate({rules:{Email:{required:true,email:true},Password:{required:true,minlength:6}},messages:{Email:{required:"请填写邮箱",email:"请输入正确的邮箱格式"},Password:{required:"请填写你的密码!",minlength:"密码长度不能小于6位"}},errorPlacement:function(error,element){formMessage(error[0].innerText)},submitHandler:function(form){$.ajax({url:form.action,type:form.method,data:$(form).serialize(),success:function(result){if(!result.success){formMessage(result.message)}else{window.location.reload()}}})},invalidHandler:function(form,validator){return false}});$("#Register").validate({rules:{Email:{required:true,email:true},Password:{required:true,minlength:6},ConfirmPassword:{equalTo:"#pwd"}},messages:{Email:{required:"请填写邮箱",email:"请输入正确的邮箱格式"},Password:{required:"请填写你的密码!",minlength:"密码长度不能小于6位"},ConfirmPassword:{equalTo:"确认密码与密码不一致"}},errorPlacement:function(error,element){formMessage(error[0].innerText)},submitHandler:function(form){console.log(form.action);$.ajax({url:form.action,type:form.method,data:form.serialize(),success:function(result){if(!result.success){formMessage(result.message)}else{window.location.reload()}}})}})}).show()})})();function formMessage(a){$(".error").addClass("alert alert-danger").html('<i class="glyphicon glyphicon-remove" style="top: 2px;"></i> '+a)}function showRegisterForm(){$(".loginBox").fadeOut("fast",function(){$(".registerBox").fadeIn("fast");$(".login-footer").fadeOut("fast",function(){$(".register-footer").fadeIn("fast")});$(".modal-title").html("快速注册")});$(".error").removeClass("alert alert-danger").html("")}function showLoginForm(){$("#loginModal .registerBox").fadeOut("fast",function(){$(".loginBox").fadeIn("fast");$(".register-footer").fadeOut("fast",function(){$(".login-footer").fadeIn("fast")});$(".modal-title").html("快速登录")});$(".error").removeClass("alert alert-danger").html("")};